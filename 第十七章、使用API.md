
Âú®Êú¨Á´†‰∏≠ÔºåÂ∞ÜÂ≠¶‰π†ÁºñÂÜô‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ®ãÂ∫èÔºåÂπ∂ÂØπÂÖ∂Ëé∑ÂèñÁöÑÊï∞ÊçÆËøõË°åÂèØËßÜÂåñ„ÄÇËøô‰∏™Á®ãÂ∫èÂ∞Ü‰ΩøÁî®WebÂ∫îÁî®ÁºñÁ®ãÊé•Âè£ÔºàAPIÔºâËá™Âä®ËØ∑Ê±ÇÁΩëÁ´ôÁöÑÁâπÂÆö‰ø°ÊÅØËÄå‰∏çÊòØÊï¥‰∏™ÁΩëÈ°µÔºåÂÜçÂØπËøô‰∫õ‰ø°ÊÅØËøõË°åÂèØËßÜÂåñ„ÄÇ

## 17.1„ÄÄ‰ΩøÁî®Web API
Web APIÊòØÁΩëÁ´ôÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁî®‰∫é‰∏é‰ΩøÁî®ÈùûÂ∏∏ÂÖ∑‰ΩìÁöÑURLËØ∑Ê±ÇÁâπÂÆö‰ø°ÊÅØÁöÑÁ®ãÂ∫è‰∫§‰∫í„ÄÇËøôÁßçËØ∑Ê±ÇÁß∞‰∏∫APIË∞ÉÁî®„ÄÇËØ∑Ê±ÇÁöÑÊï∞ÊçÆÂ∞Ü‰ª•Êòì‰∫éÂ§ÑÁêÜÁöÑÊ†ºÂºèÔºàÂ¶ÇJSONÊàñCSVÔºâËøîÂõû„ÄÇ‰æùËµñ‰∫éÂ§ñÈÉ®Êï∞ÊçÆÊ∫êÁöÑÂ§ßÂ§öÊï∞Â∫îÁî®Á®ãÂ∫èÈÉΩ‰æùËµñ‰∫éAPIË∞ÉÁî®ÔºåÂ¶ÇÈõÜÊàêÁ§æ‰∫§Â™í‰ΩìÁΩëÁ´ôÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÇ

### 17.1.1„ÄÄGitÂíåGitHub
Êú¨Á´†ÁöÑÂèØËßÜÂåñÂü∫‰∫éÊù•Ëá™GitHubÁöÑ‰ø°ÊÅØÔºåËøôÊòØ‰∏Ä‰∏™ËÆ©Á®ãÂ∫èÂëòËÉΩÂ§üÂçè‰ΩúÂºÄÂèëÈ°πÁõÆÁöÑÁΩëÁ´ô„ÄÇÂ∞Ü‰ΩøÁî®GitHubÁöÑAPIÊù•ËØ∑Ê±ÇÊúâÂÖ≥ËØ•ÁΩëÁ´ô‰∏≠PythonÈ°πÁõÆÁöÑ‰ø°ÊÅØÔºåÁÑ∂Âêé‰ΩøÁî®PygalÁîüÊàê‰∫§‰∫íÂºèÂèØËßÜÂåñÔºå‰ª•ÂëàÁé∞Ëøô‰∫õÈ°πÁõÆÁöÑÂèóÊ¨¢ËøéÁ®ãÂ∫¶„ÄÇ

> GitHubÔºàhttps://github.com/ ÔºâÁöÑÂêçÂ≠óÊ∫êËá™GitÔºåGitÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÔºåËÆ©Á®ãÂ∫èÂëòÂõ¢ÈòüËÉΩÂ§üÂçè‰ΩúÂºÄÂèëÈ°πÁõÆ„ÄÇGitÂ∏ÆÂä©Â§ßÂÆ∂ÁÆ°ÁêÜ‰∏∫È°πÁõÆÊâÄÂÅöÁöÑÂ∑•‰ΩúÔºåÈÅøÂÖç‰∏Ä‰∏™‰∫∫ÊâÄÂÅöÁöÑ‰øÆÊîπÂΩ±ÂìçÂÖ∂‰ªñ‰∫∫ÊâÄÂÅöÁöÑ‰øÆÊîπ„ÄÇÂú®È°πÁõÆ‰∏≠ÂÆûÁé∞Êñ∞ÂäüËÉΩÊó∂ÔºåGitÂ∞ÜË∑üË∏™ÂØπÊØè‰∏™Êñá‰ª∂ÊâÄÂÅöÁöÑ‰øÆÊîπ„ÄÇÁ°ÆÂÆö‰ª£Á†ÅÂèØË°åÂêéÔºåÊèê‰∫§ÊâÄÂÅöÁöÑ‰øÆÊîπÔºåËÄåGitÂ∞ÜËÆ∞ÂΩïÈ°πÁõÆÊúÄÊñ∞ÁöÑÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÁäØÈîôÔºåÂèØËΩªÊùæÂú∞ËøîÂõû‰ª•ÂâçÁöÑ‰ªª‰ΩïÂèØË°åÁä∂ÊÄÅ„ÄÇGitHub‰∏äÁöÑÈ°πÁõÆÈÉΩÂ≠òÂÇ®Âú®‰ªìÂ∫ì‰∏≠ÔºåÂêéËÄÖÂåÖÂê´‰∏éÈ°πÁõÆÁõ∏ÂÖ≥ËÅîÁöÑ‰∏ÄÂàáÔºö‰ª£Á†Å„ÄÅÈ°πÁõÆÂèÇ‰∏éËÄÖÁöÑ‰ø°ÊÅØ„ÄÅÈóÆÈ¢òÊàñbugÊä•ÂëäÁ≠â„ÄÇ

> ÂØπ‰∫éÂñúÊ¨¢ÁöÑÈ°πÁõÆÔºåGitHubÁî®Êà∑ÂèØÁªôÂÆÉÂä†ÊòüÔºàstarÔºâ‰ª•Ë°®Á§∫ÊîØÊåÅÔºåÁî®Êà∑ËøòÂèØË∑üË∏™‰ªñÂèØËÉΩÊÉ≥‰ΩøÁî®ÁöÑÈ°πÁõÆ„ÄÇ

Âú®Êú¨Á´†‰∏≠ÔºåÂ∞ÜÁºñÂÜô‰∏Ä‰∏™Á®ãÂ∫èÔºåÂÆÉËá™Âä®‰∏ãËΩΩGitHub‰∏äÊòüÁ∫ßÊúÄÈ´òÁöÑPythonÈ°πÁõÆÁöÑ‰ø°ÊÅØÔºåÂπ∂ÂØπËøô‰∫õ‰ø°ÊÅØËøõË°åÂèØËßÜÂåñ„ÄÇ

### 17.1.2„ÄÄ‰ΩøÁî®APIË∞ÉÁî®ËØ∑Ê±ÇÊï∞ÊçÆ
GitHubÁöÑAPIËÆ©‰Ω†ËÉΩÂ§üÈÄöËøáAPIË∞ÉÁî®Êù•ËØ∑Ê±ÇÂêÑÁßç‰ø°ÊÅØ„ÄÇ
```
https://api.github.com/search/repositories?q=language:python&sort=stars
```
Ëøô‰∏™Ë∞ÉÁî®ËøîÂõûGitHubÂΩìÂâçÊâòÁÆ°‰∫ÜÂ§öÂ∞ë‰∏™PythonÈ°πÁõÆÔºåËøòÊúâÊúâÂÖ≥ÊúÄÂèóÊ¨¢ËøéÁöÑPython‰ªìÂ∫ìÁöÑ‰ø°ÊÅØ„ÄÇ

### 17.1.3„ÄÄÂÆâË£Örequests
```sh
pip3 install --user requests
```

### 17.1.4„ÄÄÂ§ÑÁêÜAPIÂìçÂ∫î


```python
import requests

# ÊâßË°åAPIË∞ÉÁî®Âπ∂Â≠òÂÇ®ÂìçÂ∫î
url = "https://api.github.com/search/repositories?q=language:python&sort=stars"
req = requests.get(url)
print("Status Code:", req.status_code)

# Â∞ÜAPIÂìçÂ∫îÂ≠òÂÇ®Âú®‰∏Ä‰∏™ÂèòÈáè‰∏≠
response_dict = req.json()

# Â§ÑÁêÜÁªìÊûú
print(response_dict.keys())
```

    Status Code: 200
    dict_keys(['total_count', 'incomplete_results', 'items'])


È¶ñÂÖàÂØºÂÖ•Ê®°Âùórequests „ÄÇÂ≠òÂÇ®APIË∞ÉÁî®ÁöÑURLÔºåÁÑ∂Âêé‰ΩøÁî®requests Êù•ÊâßË°åË∞ÉÁî®„ÄÇË∞ÉÁî®get() Âπ∂Â∞ÜURL‰º†ÈÄíÁªôÂÆÉÔºåÂÜçÂ∞ÜÂìçÂ∫îÂØπË±°Â≠òÂÇ®Âú®ÂèòÈáèreq‰∏≠„ÄÇÂìçÂ∫îÂØπË±°ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫status_codeÁöÑÂ±ûÊÄßÔºåÂÆÉËÆ©Êàë‰ª¨Áü•ÈÅìËØ∑Ê±ÇÊòØÂê¶ÊàêÂäü‰∫ÜÔºàÁä∂ÊÄÅÁ†Å200Ë°®Á§∫ËØ∑Ê±ÇÊàêÂäüÔºâ„ÄÇÊúÄÂêéÊâìÂç∞status_codeÔºåÊ†∏ÂÆûË∞ÉÁî®ÊòØÂê¶ÊàêÂäü‰∫Ü„ÄÇ

Ëøô‰∏™APIËøîÂõûJSONÊ†ºÂºèÁöÑ‰ø°ÊÅØÔºåÂõ†Ê≠§‰ΩøÁî®ÊñπÊ≥ïjson()Â∞ÜËøô‰∫õ‰ø°ÊÅØËΩ¨Êç¢‰∏∫‰∏Ä‰∏™PythonÂ≠óÂÖ∏„ÄÇ

### 17.1.5„ÄÄÂ§ÑÁêÜÂìçÂ∫îÂ≠óÂÖ∏


```python
print("Total repositories:", response_dict['total_count'])

# Êé¢Á¥¢ÊúâÂÖ≥‰ªìÂ∫ìÁöÑ‰ø°ÊÅØ
repo_dicts = response_dict['items']
print("Repositories returned:", len(repo_dicts))

# Á†îÁ©∂Á¨¨‰∏Ä‰∏™‰ªìÂ∫ì
repo_dict = repo_dicts[0]
print("\nKeys:", len(repo_dict))
print_num = 0
for key in sorted(repo_dict.keys()):
    print(key)
    print_num += 1
    if print_num > 10:
        break
```

    Total repositories: 5009702
    Repositories returned: 30
    
    Keys: 74
    archive_url
    archived
    assignees_url
    blobs_url
    branches_url
    clone_url
    collaborators_url
    comments_url
    commits_url
    compare_url
    contents_url



```python
# Á†îÁ©∂‰∏Ä‰∏™‰ªìÂ∫ì
repo_dict = repo_dicts[20]

print("\nSelected information about first repository:")
print('Name:', repo_dict['name'])
print('Owner:', repo_dict['owner']['login'])
print('Stars:', repo_dict['stargazers_count'])
print('Repository:', repo_dict['html_url'])
print('Created:', repo_dict['created_at'])
print('Updated:', repo_dict['updated_at'])
print('Description:', repo_dict['description'])
```

    
    Selected information about first repository:
    Name: you-get
    Owner: soimort
    Stars: 31686
    Repository: https://github.com/soimort/you-get
    Created: 2012-08-20T15:53:36Z
    Updated: 2020-03-27T12:28:22Z
    Description: :arrow_double_down: Dumb downloader that scrapes the web


### 17.1.6„ÄÄÊ¶ÇËø∞ÊúÄÂèóÊ¨¢ËøéÁöÑ‰ªìÂ∫ì


```python
repo_dicts = response_dict['items']
print("Repositories returned:", len(repo_dicts))

print("\nSelected information about each repository:")
for repo_dict in repo_dicts:
    print('\nName:', repo_dict['name'])
    print('Owner:', repo_dict['owner']['login'])
    print('Stars:', repo_dict['stargazers_count'])
    print('Repository:', repo_dict['html_url'])
    print('Description:', repo_dict['description'])
```

    Repositories returned: 30
    
    Selected information about each repository:
    
    Name: system-design-primer
    Owner: donnemartin
    Stars: 85975
    Repository: https://github.com/donnemartin/system-design-primer
    Description: Learn how to design large-scale systems. Prep for the system design interview.  Includes Anki flashcards.
    
    Name: awesome-python
    Owner: vinta
    Stars: 80591
    Repository: https://github.com/vinta/awesome-python
    Description: A curated list of awesome Python frameworks, libraries, software and resources
    
    Name: public-apis
    Owner: public-apis
    Stars: 72865
    Repository: https://github.com/public-apis/public-apis
    Description: A collective list of free APIs for use in software and web development.
    
    Name: Python
    Owner: TheAlgorithms
    Stars: 68770
    Repository: https://github.com/TheAlgorithms/Python
    Description: All Algorithms implemented in Python
    
    Name: youtube-dl
    Owner: ytdl-org
    Stars: 63344
    Repository: https://github.com/ytdl-org/youtube-dl
    Description: Command-line program to download videos from YouTube.com and other video sites
    
    Name: models
    Owner: tensorflow
    Stars: 62588
    Repository: https://github.com/tensorflow/models
    Description: Models and examples built with TensorFlow
    
    Name: thefuck
    Owner: nvbn
    Stars: 52698
    Repository: https://github.com/nvbn/thefuck
    Description: Magnificent app which corrects your previous console command.
    
    Name: flask
    Owner: pallets
    Stars: 49601
    Repository: https://github.com/pallets/flask
    Description: The Python micro framework for building web applications.
    
    Name: django
    Owner: django
    Stars: 48097
    Repository: https://github.com/django/django
    Description: The Web framework for perfectionists with deadlines.
    
    Name: keras
    Owner: keras-team
    Stars: 47389
    Repository: https://github.com/keras-team/keras
    Description: Deep Learning for humans
    
    Name: httpie
    Owner: jakubroztocil
    Stars: 46164
    Repository: https://github.com/jakubroztocil/httpie
    Description: As easy as HTTPie /aitch-tee-tee-pie/  ü•ß Modern command line HTTP client ‚Äì user-friendly curl alternative with intuitive UI, JSON support, syntax highlighting, wget-like downloads, extensions, etc.  https://twitter.com/clihttp
    
    Name: awesome-machine-learning
    Owner: josephmisiti
    Stars: 43961
    Repository: https://github.com/josephmisiti/awesome-machine-learning
    Description: A curated list of awesome Machine Learning frameworks, libraries and software.
    
    Name: ansible
    Owner: ansible
    Stars: 42390
    Repository: https://github.com/ansible/ansible
    Description: Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications ‚Äî automate in a language that approaches plain English, using SSH, with no agents to install on remote systems. https://docs.ansible.com/ansible/
    
    Name: requests
    Owner: psf
    Stars: 42026
    Repository: https://github.com/psf/requests
    Description: A simple, yet elegant HTTP library.
    
    Name: scikit-learn
    Owner: scikit-learn
    Stars: 39901
    Repository: https://github.com/scikit-learn/scikit-learn
    Description: scikit-learn: machine learning in Python
    
    Name: scrapy
    Owner: scrapy
    Stars: 36538
    Repository: https://github.com/scrapy/scrapy
    Description: Scrapy, a fast high-level web crawling & scraping framework for Python.
    
    Name: big-list-of-naughty-strings
    Owner: minimaxir
    Stars: 35479
    Repository: https://github.com/minimaxir/big-list-of-naughty-strings
    Description: The Big List of Naughty Strings is a list of strings which have a high probability of causing issues when used as user-input data.
    
    Name: face_recognition
    Owner: ageitgey
    Stars: 33085
    Repository: https://github.com/ageitgey/face_recognition
    Description: The world's simplest facial recognition api for Python and the command line
    
    Name: shadowsocks
    Owner: shadowsocks
    Stars: 32503
    Repository: https://github.com/shadowsocks/shadowsocks
    Description: None
    
    Name: core
    Owner: home-assistant
    Stars: 32337
    Repository: https://github.com/home-assistant/core
    Description: :house_with_garden: Open source home automation that puts local control and privacy first
    
    Name: you-get
    Owner: soimort
    Stars: 31686
    Repository: https://github.com/soimort/you-get
    Description: :arrow_double_down: Dumb downloader that scrapes the web
    
    Name: cpython
    Owner: python
    Stars: 30029
    Repository: https://github.com/python/cpython
    Description: The Python programming language
    
    Name: XX-Net
    Owner: XX-net
    Stars: 29795
    Repository: https://github.com/XX-net/XX-Net
    Description: a web proxy tool
    
    Name: faceswap
    Owner: deepfakes
    Stars: 29608
    Repository: https://github.com/deepfakes/faceswap
    Description: Deepfakes Software For All
    
    Name: HelloGitHub
    Owner: 521xueweihan
    Stars: 28461
    Repository: https://github.com/521xueweihan/HelloGitHub
    Description: :octocat: Find pearls on open-source seashore ÂàÜ‰∫´ GitHub ‰∏äÊúâË∂£„ÄÅÂÖ•Èó®Á∫ßÁöÑÂºÄÊ∫êÈ°πÁõÆ
    
    Name: 12306
    Owner: testerSunshine
    Stars: 28390
    Repository: https://github.com/testerSunshine/12306
    Description: 12306Êô∫ËÉΩÂà∑Á•®ÔºåËÆ¢Á•®
    
    Name: incubator-superset
    Owner: apache
    Stars: 28197
    Repository: https://github.com/apache/incubator-superset
    Description: Apache Superset (incubating) is a modern, enterprise-ready business intelligence web application
    
    Name: 100-Days-Of-ML-Code
    Owner: Avik-Jain
    Stars: 28151
    Repository: https://github.com/Avik-Jain/100-Days-Of-ML-Code
    Description: 100 Days of ML Coding
    
    Name: CppCoreGuidelines
    Owner: isocpp
    Stars: 26648
    Repository: https://github.com/isocpp/CppCoreGuidelines
    Description: The C++ Core Guidelines are a set of tried-and-true guidelines, rules, and best practices about coding in C++
    
    Name: certbot
    Owner: certbot
    Stars: 26473
    Repository: https://github.com/certbot/certbot
    Description: Certbot is EFF's tool to obtain certs from Let's Encrypt and (optionally) auto-enable HTTPS on your server.  It can also act as a client for any other CA that uses the ACME protocol.


### 17.1.7„ÄÄÁõëËßÜAPIÁöÑÈÄüÁéáÈôêÂà∂
Â§ßÂ§öÊï∞APIÈÉΩÂ≠òÂú®ÈÄüÁéáÈôêÂà∂ÔºåÂç≥‰Ω†Âú®ÁâπÂÆöÊó∂Èó¥ÂÜÖÂèØÊâßË°åÁöÑËØ∑Ê±ÇÊï∞Â≠òÂú®ÈôêÂà∂„ÄÇË¶ÅËé∑ÊÇâ‰Ω†ÊòØÂê¶Êé•Ëøë‰∫ÜGitHubÁöÑÈôêÂà∂ÔºåËØ∑Âú®ÊµèËßàÂô®‰∏≠ËæìÂÖ•`https://api.github.com/rate_limit`

## 17.2„ÄÄ‰ΩøÁî®PygalÂèØËßÜÂåñ‰ªìÂ∫ì


```python
import requests
import pygal
from IPython.display import SVG, display
from pygal.style import LightColorizedStyle as LCS, LightenStyle as LS

# ÊâßË°åAPIË∞ÉÁî®Âπ∂Â≠òÂÇ®ÂìçÂ∫î
URL = 'https://api.github.com/search/repositories?q=language:python&sort=star'
req = requests.get(URL)
print("Status code:", req.status_code)

# Â∞ÜAPIÂìçÂ∫îÂ≠òÂÇ®Âú®‰∏Ä‰∏™ÂèòÈáè‰∏≠
response_dict = req.json()
print("Total repositories:", response_dict['total_count'])

# Á†îÁ©∂ÊúâÂÖ≥‰ªìÂ∫ìÁöÑ‰ø°ÊÅØ
repo_dicts = response_dict['items']

names, stars = [], []
for repo_dict in repo_dicts:
    names.append(repo_dict['name'])
    stars.append(repo_dict['stargazers_count'])

# ÂèØËßÜÂåñ
my_style = LS('#333366', base_style=LCS)
chart = pygal.Bar(style=my_style, x_label_rotation=45, show_legend=False)
chart.title = 'Most-Starred Python Projects on GitHub'
chart.x_labels = names

chart.add('', stars)
chart.render_to_file('python_repos.svg')
display(SVG(chart.render()))
```

    Status code: 200
    Total repositories: 5009701



![svg](_v_images/20200407_output_15_1.svg)


‰ΩøÁî®LightenStyleÁ±ªÔºàÂà´ÂêçLSÔºâÂÆö‰πâ‰∫Ü‰∏ÄÁßçÊ†∑ÂºèÔºåÂπ∂Â∞ÜÂÖ∂Âü∫Ëâ≤ËÆæÁΩÆ‰∏∫Ê∑±ËìùËâ≤„ÄÇ‰º†ÈÄí‰∫ÜÂÆûÂèÇbase_styleÔºå‰ª•‰ΩøÁî®LightColorizedStyleÁ±ªÔºàÂà´ÂêçLCSÔºâ„ÄÇÁÑ∂ÂêéÔºå‰ΩøÁî®Bar()ÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊù°ÂΩ¢ÂõæÔºåÂπ∂ÂêëÂÆÉ‰º†ÈÄí‰∫Ümy_style„ÄÇËøò‰º†ÈÄí‰∫ÜÂè¶Â§ñ‰∏§‰∏™Ê†∑ÂºèÂÆûÂèÇÔºöËÆ©Ê†áÁ≠æÁªïx ËΩ¥ÊóãËΩ¨45Â∫¶Ôºàx_label_rotation=45ÔºâÔºåÂπ∂ÈöêËóè‰∫ÜÂõæ‰æãÔºàshow_legend=FalseÔºâÔºåÂõ†‰∏∫Âè™Âú®ÂõæË°®‰∏≠ÁªòÂà∂‰∏Ä‰∏™Êï∞ÊçÆÁ≥ªÂàó„ÄÇÊé•‰∏ãÊù•ÔºåÁªôÂõæË°®ÊåáÂÆö‰∫ÜÊ†áÈ¢òÔºåÂπ∂Â∞ÜÂ±ûÊÄßx_labelsËÆæÁΩÆ‰∏∫ÂàóË°®names„ÄÇ

Áî±‰∫éÊàë‰ª¨‰∏çÈúÄË¶ÅÁªôËøô‰∏™Êï∞ÊçÆÁ≥ªÂàóÊ∑ªÂä†Ê†áÁ≠æÔºåÂõ†Ê≠§Âú®Ê∑ªÂä†Êï∞ÊçÆÊó∂ÔºåÂ∞ÜÊ†áÁ≠æËÆæÁΩÆÊàê‰∫ÜÁ©∫Â≠óÁ¨¶‰∏≤„ÄÇ

### 17.2.1„ÄÄÊîπËøõPygalÂõæË°®


```python
# ÂèØËßÜÂåñ
my_style = LS('#333366', base_style=LCS)

my_config = pygal.Config()
my_config.x_label_rotation = 45
my_config.show_legend = False
my_config.title_font_size = 24
my_config.label_font_size = 14
my_config.major_label_font_size = 18
#  Â∞ÜËæÉÈïøÁöÑÈ°πÁõÆÂêçÁº©Áü≠‰∏∫15‰∏™Â≠óÁ¨¶
my_config.truncate_label = 15
my_config.show_y_guides = True
my_config.width = 1000

chart = pygal.Bar(my_config, style=my_style)
chart.title = 'Most-Starred Python Projects on GitHub'
chart.x_labels = names

chart.add('', stars)
chart.render_to_file('python_repos.svg')
display(SVG(chart.render()))
```


![svg](_v_images/20200407_output_18_0.svg)


### 17.2.2„ÄÄÊ∑ªÂä†Ëá™ÂÆö‰πâÂ∑•ÂÖ∑ÊèêÁ§∫
Âú®Pygal‰∏≠ÔºåÂ∞ÜÈº†Ê†áÊåáÂêëÊù°ÂΩ¢Â∞ÜÊòæÁ§∫ÂÆÉË°®Á§∫ÁöÑ‰ø°ÊÅØÔºåËøôÈÄöÂ∏∏Áß∞‰∏∫Â∑•ÂÖ∑ÊèêÁ§∫ „ÄÇ


```python
import pygal
from pygal.style import LightColorizedStyle as LCS, LightenStyle as LS
from IPython.display import SVG, display

my_style = LS('#663300', base_style=LCS)
chart = pygal.Bar(style=my_style, x_label_rotation=45, show_legend=True)

chart.title = '17.2.2 Chart'
chart.x_labels = ['system-design-primer', 'awesome-python', 'public-apis']

plot_dicts = [{'value': 16101, 'label': 'Description of system-design-primer.'},
              {'value': 15028, 'label': 'Description of awesome-python.'},
              {'value': 14798, 'label': 'Description of public-apis.'},]

chart.add('',plot_dicts)
chart.render_to_file('python_repos.svg')
display(SVG(chart.render()))
```


![svg](_v_images/20200407_output_20_0.svg)


ÂÆö‰πâ‰∏Ä‰∏™Âêç‰∏∫plot_dicts ÁöÑÂàóË°®ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∏â‰∏™Â≠óÂÖ∏ÔºåÂàÜÂà´ÈíàÂØπÂâç‰∏â‰∏™È°πÁõÆ„ÄÇÊØè‰∏™Â≠óÂÖ∏ÈÉΩÂåÖÂê´‰∏§‰∏™ÈîÆÔºö'value' Âíå'label' „ÄÇPygalÊ†πÊçÆ‰∏éÈîÆ'value' Áõ∏ÂÖ≥ËÅîÁöÑÊï∞Â≠óÊù•Á°ÆÂÆöÊù°ÂΩ¢ÁöÑÈ´òÂ∫¶ÔºåÂπ∂‰ΩøÁî®‰∏é'label' Áõ∏ÂÖ≥ËÅîÁöÑÂ≠óÁ¨¶‰∏≤ÁªôÊù°ÂΩ¢ÂàõÂª∫Â∑•ÂÖ∑ÊèêÁ§∫„ÄÇ

### 17.2.3„ÄÄÊ†πÊçÆÊï∞ÊçÆÁªòÂõæ


```python
# ÂèØËßÜÂåñ
my_style = LS('#990066', base_style=LCS)

my_config = pygal.Config()
my_config.x_label_rotation = 45
my_config.show_legend = False
my_config.title_font_size = 24
my_config.label_font_size = 14
my_config.major_label_font_size = 18
#  Â∞ÜËæÉÈïøÁöÑÈ°πÁõÆÂêçÁº©Áü≠‰∏∫15‰∏™Â≠óÁ¨¶
my_config.truncate_label = 15
my_config.show_y_guides = True
my_config.width = 1000

names, list_plot_dicts = [], []

for repo_dict in repo_dicts:
    names.append(repo_dict['name'])
    
    plot_dict = dict()
    plot_dict['value']=repo_dict['stargazers_count']
    # ÈÄöËøástrÂáΩÊï∞Ëß£ÂÜ≥NoneTypeÁöÑÈóÆÈ¢ò
    plot_dict['label']=str(repo_dict['description'])
    
    list_plot_dicts.append(plot_dict)

chart = pygal.Bar(my_config, style=my_style)
chart.title = 'Most-Starred Python Projects on GitHub'
chart.x_labels = names

chart.add('', list_plot_dicts)
chart.render_to_file('python_repos.svg')
display(SVG(chart.render()))
```


![svg](_v_images/20200407_output_23_0.svg)


### 17.2.4„ÄÄÂú®ÂõæË°®‰∏≠Ê∑ªÂä†ÂèØÂçïÂáªÁöÑÈìæÊé•


```python
names, list_plot_dicts = [], []

for repo_dict in repo_dicts:
    names.append(repo_dict['name'])
    
    plot_dict = dict()
    plot_dict['value'] = repo_dict['stargazers_count']
    # ÈÄöËøástrÂáΩÊï∞Ëß£ÂÜ≥NoneTypeÁöÑÈóÆÈ¢ò
    plot_dict['label'] = str(repo_dict['description'])
    plot_dict['xlink'] = repo_dict['html_url']
    
    list_plot_dicts.append(plot_dict)

chart = pygal.Bar(my_config, style=my_style)
chart.title = 'Most-Starred Python Projects on GitHub'
chart.x_labels = names

chart.add('', list_plot_dicts)
chart.render_to_file('python_repos.svg')
display(SVG(chart.render()))
```


![svg](_v_images/20200407_output_25_0.svg)


PygalÊ†πÊçÆ‰∏éÈîÆ'xlink' Áõ∏ÂÖ≥ËÅîÁöÑURLÂ∞ÜÊØè‰∏™Êù°ÂΩ¢ÈÉΩËΩ¨Êç¢‰∏∫Ê¥ªË∑ÉÁöÑÈìæÊé•„ÄÇÂçïÂáªÂõæË°®‰∏≠ÁöÑ‰ªª‰ΩïÊù°ÂΩ¢Êó∂ÔºåÈÉΩÂ∞ÜÂú®ÊµèËßàÂô®‰∏≠ÊâìÂºÄ‰∏Ä‰∏™Êñ∞ÁöÑÊ†áÁ≠æÈ°µÔºåÂπ∂Âú®ÂÖ∂‰∏≠ÊòæÁ§∫Áõ∏Â∫îÈ°πÁõÆÁöÑGitHubÈ°µÈù¢„ÄÇ

## 17.3„ÄÄHacker News API

‰∏∫Êé¢Á¥¢Â¶Ç‰Ωï‰ΩøÁî®ÂÖ∂‰ªñÁΩëÁ´ôÁöÑAPIË∞ÉÁî®ÔºåÊàë‰ª¨Êù•ÁúãÁúãHacker NewsÔºàhttp://news.ycombinator.com/ Ôºâ„ÄÇÂú®Hacker NewsÁΩëÁ´ôÔºåÁî®Êà∑ÂàÜ‰∫´ÁºñÁ®ãÂíåÊäÄÊúØÊñπÈù¢ÁöÑÊñáÁ´†ÔºåÂπ∂Â∞±Ëøô‰∫õÊñáÁ´†Â±ïÂºÄÁßØÊûÅÁöÑËÆ®ËÆ∫„ÄÇHacker NewsÁöÑAPIËÆ©‰Ω†ËÉΩÂ§üËÆøÈóÆÊúâÂÖ≥ËØ•ÁΩëÁ´ôÊâÄÊúâÊñáÁ´†ÂíåËØÑËÆ∫ÁöÑ‰ø°ÊÅØÔºå‰∏î‰∏çË¶ÅÊ±Ç‰Ω†ÈÄöËøáÊ≥®ÂÜåËé∑ÂæóÂØÜÈí•„ÄÇ
`https://hacker-news.firebaseio.com/v0/item/9884165.json`


```python
import requests
from operator import itemgetter
url = 'https://hacker-news.firebaseio.com/v0/topstories.json'
# ÈÄöËøáProxyÊñπÂºèËé∑ÂèñÂÜÖÂÆπ
proxies={'http':'221.178.146.113:61399',
         'https':'221.178.146.113:61399'}
req = requests.get(url, proxies = proxies)
print(req.status_code)

# Â§ÑÁêÜÊúâÂÖ≥ÊØèÁØáÊñáÁ´†ÁöÑ‰ø°ÊÅØ
submission_ids = req.json()
submission_dicts = []
for submission_id in submission_ids[:30]:
    # ÂØπ‰∫éÊØèÁØáÊñáÁ´†ÔºåÈÉΩÊâßË°å‰∏Ä‰∏™APIË∞ÉÁî®
    url = 'https://hacker-news.firebaseio.com/v0/item/{}.json'.format(submission_id)
    submission_r = requests.get(url, proxies = proxies)
    # print(submission_r.status_code)
    response_dict = submission_r.json()
    
    submission_dict = {
        'label': response_dict['title'],
        'xlink': 'http://news.ycombinator.com/item?id=' + str(submission_id),
        'value': int(response_dict.get('descendants', 0))
    }
    submission_dicts.append(submission_dict)
    
    submission_dicts = sorted(submission_dicts, key=itemgetter('value'),
                              reverse=True)

for submission_dict in submission_dicts:
    print("\nTitle:", submission_dict['label'])
    print("Discussion link:", submission_dict['xlink'])
    print("Comments:", submission_dict['value'])

submission_name = [x['label'] for x in submission_dicts]

```

    200
    
    Title: Zoom iOS app sends data to Facebook even if you don‚Äôt have a Facebook account
    Discussion link: http://news.ycombinator.com/item?id=22693792
    Comments: 316
    
    Title: It's not what programming languages do, it's what they shepherd you to
    Discussion link: http://news.ycombinator.com/item?id=22696229
    Comments: 208
    
    Title: Zotero: Personal Research Assistant
    Discussion link: http://news.ycombinator.com/item?id=22694891
    Comments: 182
    
    Title: How South Korea Reined In The Outbreak Without Shutting Everything Down
    Discussion link: http://news.ycombinator.com/item?id=22701398
    Comments: 121
    
    Title: Upgraded Google Glass helps autistic kids ‚Äúsee‚Äù emotions
    Discussion link: http://news.ycombinator.com/item?id=22699608
    Comments: 73
    
    Title: Your First THINK C Program
    Discussion link: http://news.ycombinator.com/item?id=22660888
    Comments: 70
    
    Title: Our list of free software for remote work
    Discussion link: http://news.ycombinator.com/item?id=22698299
    Comments: 60
    
    Title: Adding tests when you don't have time to
    Discussion link: http://news.ycombinator.com/item?id=22691215
    Comments: 34
    
    Title: Dashmap: Fast concurrent HashMap for Rust
    Discussion link: http://news.ycombinator.com/item?id=22699176
    Comments: 34
    
    Title: When To Chat: Reconcile Time Zone Differences
    Discussion link: http://news.ycombinator.com/item?id=22701406
    Comments: 32
    
    Title: UK scientists ask for help in transcribing 200 years of rainfall data
    Discussion link: http://news.ycombinator.com/item?id=22691949
    Comments: 29
    
    Title: Dumping MiniDisc Media
    Discussion link: http://news.ycombinator.com/item?id=22701061
    Comments: 28
    
    Title: Amiga Machine Code Course
    Discussion link: http://news.ycombinator.com/item?id=22683221
    Comments: 25
    
    Title: The Polygons of Doom: PSX
    Discussion link: http://news.ycombinator.com/item?id=22699439
    Comments: 21
    
    Title: Streamz: Python pipelines to manage continuous streams of data
    Discussion link: http://news.ycombinator.com/item?id=22699319
    Comments: 21
    
    Title: God be with you till we meet again (1918)
    Discussion link: http://news.ycombinator.com/item?id=22701059
    Comments: 20
    
    Title: Google Cloud Partial Outage
    Discussion link: http://news.ycombinator.com/item?id=22701352
    Comments: 16
    
    Title: Scientists identify microbe that could help degrade polyurethane-based plastics
    Discussion link: http://news.ycombinator.com/item?id=22701830
    Comments: 15
    
    Title: Show HN: A frame by frame GIF editor with Photoshop vibes
    Discussion link: http://news.ycombinator.com/item?id=22696179
    Comments: 12
    
    Title: Retroshare: Secure Communication for Everyone
    Discussion link: http://news.ycombinator.com/item?id=22698306
    Comments: 10
    
    Title: Show HN: Meta book recommendations from Ask HN threads
    Discussion link: http://news.ycombinator.com/item?id=22693634
    Comments: 8
    
    Title: Ask HN: Need to talk to whoever did contact-tracing on Diamond Princess
    Discussion link: http://news.ycombinator.com/item?id=22701031
    Comments: 8
    
    Title: Seven Stages of Open Software
    Discussion link: http://news.ycombinator.com/item?id=22690906
    Comments: 4
    
    Title: Mycroft is the world‚Äôs first open source voice assistant
    Discussion link: http://news.ycombinator.com/item?id=22702195
    Comments: 3
    
    Title: The Subtle Power of Booleans
    Discussion link: http://news.ycombinator.com/item?id=22688933
    Comments: 3
    
    Title: Indie Support Weeks
    Discussion link: http://news.ycombinator.com/item?id=22702051
    Comments: 1
    
    Title: GraphQL Mesh ‚Äì Access services using different API spec with GraphQL queries
    Discussion link: http://news.ycombinator.com/item?id=22702243
    Comments: 1
    
    Title: Improving Remote Meetings and Presentations
    Discussion link: http://news.ycombinator.com/item?id=22701902
    Comments: 1
    
    Title: Refilling an ink jet cartridge with highlighter ink
    Discussion link: http://news.ycombinator.com/item?id=22690847
    Comments: 0
    
    Title: 10 Days Later: What Italians Wish They Had Known
    Discussion link: http://news.ycombinator.com/item?id=22702285
    Comments: 0



```python
### 
```

### ***ÁªÉ‰π†Ôºö***
17-1 ÂÖ∂‰ªñËØ≠Ë®Ä Ôºö‰øÆÊîπpython_repos.py‰∏≠ÁöÑAPIË∞ÉÁî®Ôºå‰ΩøÂÖ∂Âú®ÁîüÊàêÁöÑÂõæË°®‰∏≠ÊòæÁ§∫‰ΩøÁî®ÂÖ∂‰ªñËØ≠Ë®ÄÁºñÂÜôÁöÑÊúÄÂèóÊ¨¢ËøéÁöÑÈ°πÁõÆ„ÄÇËØ∑Â∞ùËØïËØ≠Ë®ÄJavaScript„ÄÅRuby„ÄÅC„ÄÅJava„ÄÅPerl„ÄÅHaskellÂíåGoÁ≠â„ÄÇ

17-2 ÊúÄÊ¥ªË∑ÉÁöÑËÆ®ËÆ∫ Ôºö‰ΩøÁî®hn_submissions.py‰∏≠ÁöÑÊï∞ÊçÆÔºåÂàõÂª∫‰∏Ä‰∏™Êù°ÂΩ¢ÂõæÔºåÊòæÁ§∫Hacker News‰∏äÂΩìÂâçÊúÄÊ¥ªË∑ÉÁöÑËÆ®ËÆ∫„ÄÇÊù°ÂΩ¢ÁöÑÈ´òÂ∫¶Â∫îÂØπÂ∫î‰∫éÊñáÁ´†ÂæóÂà∞ÁöÑËØÑËÆ∫Êï∞ÈáèÔºåÊù°ÂΩ¢ÁöÑÊ†áÁ≠æÂ∫îÂåÖÂê´ÊñáÁ´†ÁöÑÊ†áÈ¢òÔºåËÄåÊØè‰∏™Êù°ÂΩ¢Â∫îÊòØÂà∞ËØ•ÊñáÁ´†ËÆ®ËÆ∫È°µÈù¢ÁöÑÈìæÊé•„ÄÇ

17-3 ÊµãËØïpython_repos.py ÔºöÂú®python_repos.py‰∏≠ÔºåÊâìÂç∞status_code ÁöÑÂÄºÔºå‰ª•Ê†∏ÂÆûAPIË∞ÉÁî®ÊòØÂê¶ÊàêÂäü‰∫Ü„ÄÇËØ∑ÁºñÂÜô‰∏Ä‰∏™Âêç‰∏∫test_python_repos.pyÁöÑÁ®ãÂ∫èÔºåÂÆÉ‰ΩøÁî®ÂçïÂÖÉÊµãËØïÊù•Êñ≠Ë®Ästatus_code ÁöÑÂÄº‰∏∫200„ÄÇÊÉ≥ÊÉ≥‰Ω†ËøòÂèØÂÅöÂá∫Âì™‰∫õÊñ≠Ë®ÄÔºåÂ¶ÇËøîÂõûÁöÑÊù°ÁõÆÊï∞Á¨¶ÂêàÈ¢ÑÊúüÔºå‰ªìÂ∫ìÊÄªÊï∞Ë∂ÖËøáÁâπÂÆöÁöÑÂÄºÁ≠â„ÄÇ


```python
# 17-1
print("-----17-1-----")

import requests
import pygal
from IPython.display import SVG, display
from pygal.style import LightColorizedStyle as LCS, LightenStyle as LS

# ÊâßË°åAPIË∞ÉÁî®Âπ∂Â≠òÂÇ®ÂìçÂ∫î
URL = 'https://api.github.com/search/repositories?q=language:c&sort=star'
req = requests.get(URL)
print("Status code:", req.status_code)

# Â∞ÜAPIÂìçÂ∫îÂ≠òÂÇ®Âú®‰∏Ä‰∏™ÂèòÈáè‰∏≠
response_dict = req.json()
print("Total repositories:", response_dict['total_count'])

# Á†îÁ©∂ÊúâÂÖ≥‰ªìÂ∫ìÁöÑ‰ø°ÊÅØ
repo_dicts = response_dict['items']

names, stars = [], []
for repo_dict in repo_dicts:
    names.append(repo_dict['name'])
    stars.append(
        {'value':repo_dict['stargazers_count'],
        'label':str(repo_dict['description']),
        'xlink':repo_dict['html_url']}
    )

# ÂèØËßÜÂåñ
my_style = LS('#99FF66', base_style=LCS)
chart = pygal.Bar(style=my_style, x_label_rotation=45, show_legend=False)
chart.title = 'Most-Starred C Projects on GitHub'
chart.x_labels = names

chart.add('', stars)
chart.render_to_file('c_repos.svg')
display(SVG(chart.render()))
```

    -----17-1-----
    Status code: 200
    Total repositories: 1376017



![svg](_v_images/20200407_output_32_1.svg)



```python
# 17-2
print("-----17-2-----")

import requests
from operator import itemgetter
url = 'https://hacker-news.firebaseio.com/v0/topstories.json'
# ÈÄöËøáProxyÊñπÂºèËé∑ÂèñÂÜÖÂÆπ
proxies={'http':'221.178.146.113:61399',
         'https':'221.178.146.113:61399'}
req = requests.get(url, proxies = proxies)
print(req.status_code)

# Â§ÑÁêÜÊúâÂÖ≥ÊØèÁØáÊñáÁ´†ÁöÑ‰ø°ÊÅØ
submission_ids = req.json()
submission_dicts = []
for submission_id in submission_ids[:30]:
    # ÂØπ‰∫éÊØèÁØáÊñáÁ´†ÔºåÈÉΩÊâßË°å‰∏Ä‰∏™APIË∞ÉÁî®
    url = 'https://hacker-news.firebaseio.com/v0/item/{}.json'.format(submission_id)
    submission_r = requests.get(url, proxies = proxies)
    # print(submission_r.status_code)
    response_dict = submission_r.json()
    
    submission_dict = {
        'label': response_dict['title'],
        'xlink': 'http://news.ycombinator.com/item?id=' + str(submission_id),
        'value': int(response_dict.get('descendants', 0))
    }
    submission_dicts.append(submission_dict)
    
    submission_dicts = sorted(submission_dicts, key=itemgetter('value'),
                              reverse=True)

submission_name = [x['label'] for x in submission_dicts]


import pygal
from IPython.display import SVG, display

my_config = pygal.Config()
my_config.x_label_rotation = 45
my_config.show_legend = False
my_config.title_font_size = 24
my_config.label_font_size = 14
my_config.major_label_font_size = 18
#  Â∞ÜËæÉÈïøÁöÑÈ°πÁõÆÂêçÁº©Áü≠‰∏∫15‰∏™Â≠óÁ¨¶
my_config.truncate_label = 15
my_config.show_y_guides = True
my_config.width = 1000

chart_sub = pygal.Bar(my_config)
chart_sub.x_labels = submission_name

chart_sub.add('',submission_dicts)
chart_sub.render_to_file('hack_news.svg')
display(SVG(chart_sub.render()))
```

    -----17-2-----
    200



![svg](_v_images/20200407_output_33_1.svg)

----
![Ê¨¢ËøéÂÖ≥Ê≥®ÊàëÁöÑÂæÆ‰ø°ÂÖ¨‰ºóÂè∑](https://blog.flashield.com/images/WeChat_QRCode_200.png)
Ê¨¢ËøéÂÖ≥Ê≥®ÊàëÁöÑÂæÆ‰ø°ÂÖ¨‰ºóÂè∑‰∏ÄËµ∑‰∫§ÊµÅÔºÅ